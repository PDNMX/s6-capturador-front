<div class="content">
  <div class="container">
    <div class="row align-items-stretch no-gutters menu-wrap">
      <div class="col-md-3 g-0">
        <div class="menu-info h-100">
          <div
            class="nav flex-column nav-pills"
            id="contracts-tab"
            role="tablist"
            aria-orientation="vertical"
          >
            <h3
              class="text-left"
              id="contracts-presentacion-tab"
              data-bs-toggle="pill"
              data-bs-target="#contracts-presentacion"
              type="button"
              role="tab"
              aria-controls="contracts-presentacion"
              aria-selected="true"
            >
              &nbsp;&nbsp;4. Contrato
            </h3>
            <ng-container *ngIf="editMode">
              <button
                class="nav-link text-left active"
                id="contracts-general-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-general"
                type="button"
                role="tab"
                aria-controls="contracts-general"
                aria-selected="false"
              >
                Datos generales del contrato
              </button>

              <button
                class="nav-link text-left"
                id="contracts-items-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-items"
                type="button"
                role="tab"
                aria-controls="contracts-items"
                aria-selected="false"
              >
                Articulos del contrato
              </button>

              <button
                class="nav-link text-left"
                id="contracts-guarantees-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-guarantees"
                type="button"
                role="tab"
                aria-controls="contracts-guarantees"
                aria-selected="false"
              >
                Garantías
              </button>

              <button
                class="nav-link text-left"
                id="contracts-documents-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-documents"
                type="button"
                role="tab"
                aria-controls="contracts-documents"
                aria-selected="false"
              >
                Documentos
              </button>

              <button
                class="nav-link text-left execution-highlight"
                id="contracts-implementation-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-implementation"
                type="button"
                role="tab"
                aria-controls="contracts-implementation"
                aria-selected="false"
              >
                <span class="d-flex align-items-center">
                  <!-- Si usas Font Awesome -->
                  <b>Ejecución</b>
                </span>
              </button>

              <button
                class="nav-link text-left"
                id="contracts-milestones-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-milestones"
                type="button"
                role="tab"
                aria-controls="contracts-milestones"
                aria-selected="false"
              >
                Hitos
              </button>

              <button
                class="nav-link text-left"
                id="contracts-amendments-tab"
                data-bs-toggle="pill"
                data-bs-target="#contracts-amendments"
                type="button"
                role="tab"
                aria-controls="contracts-amendments"
                aria-selected="false"
              >
                Modificaciones
              </button>

              <div class="d-flex flex-column mb-3">
                <button
                  type="button"
                  class="btn btn-danger btn-add text-center p-3"
                  (click)="saveData()"
                >
                  Agregar contrato
                </button>
              </div>
              <div class="d-flex flex-column">
                <button
                  type="button"
                  class="btn btn-success btn-add text-center p-3"
                  (click)="cancelContract()"
                >
                  Cancelar
                </button>
              </div>
            </ng-container>
          </div>
        </div>
      </div>

      <div class="col-md-9 g-0">
        <div class="tab-content" id="contracts-tabContent">
          <ng-container *ngIf="!editMode">
            <div
              class="tab-pane fade"
              [class.active]="!editMode"
              [class.show]="!editMode"
              id="contracts-presentacion"
              role="tabpanel"
              aria-labelledby="contracts-presentacion-tab"
              tabindex="0"
            >
              <app-contracts-presentation
                [contractsArray]="contractsForm.value.contracts"
                (addNewContract)="addNewContract()"
                (deleteContract)="confirmAndDeleteContract($event)"
              ></app-contracts-presentation>
            </div>
          </ng-container>

          <ng-container *ngIf="editMode">
            <div
              class="tab-pane fade show active"
              id="contracts-general"
              role="tabpanel"
              aria-labelledby="contracts-general-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-general
                  [contractForm]="contractForm"
                ></app-contracts-general>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-items"
              role="tabpanel"
              aria-labelledby="contracts-items-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-items
                  [itemsArray]="contractForm.value.items"
                  (addItem)="addItems($event)"
                  (deleteItem)="deleteItems($event)"
                ></app-contracts-items>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-guarantees"
              role="tabpanel"
              aria-labelledby="contracts-guarantees-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-guarantees
                  [guaranteesArray]="contractForm.value.guarantees"
                  (addGuarante)="addGuarante($event)"
                  (deleteGuarante)="deleteGuarante($event)"
                >
                </app-contracts-guarantees>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-documents"
              role="tabpanel"
              aria-labelledby="contracts-documents-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-documents
                  [documentsArray]="contractForm.value.documents"
                  (addDocument)="addDocument($event)"
                  (deleteDocument)="deleteDocuments($event)"
                ></app-contracts-documents>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-implementation"
              role="tabpanel"
              aria-labelledby="contracts-implementation-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-implementation
                  [implementationForm]="implementationForm"
                ></app-contracts-implementation>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-milestones"
              role="tabpanel"
              aria-labelledby="contracts-milestones-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-milestones
                  [milestonesArray]="contractForm.value.milestones"
                  (addMilestone)="addMileston($event)"
                  (deleteMilestone)="deleteMileston($event)"
                ></app-contracts-milestones>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="contracts-amendments"
              role="tabpanel"
              aria-labelledby="contracts-amendments-tab"
              tabindex="0"
            >
              <div class="form">
                <app-contracts-amendments
                  [amendmentsArray]="contractForm.value.amendments"
                  (addAmendment)="addAmendments($event)"
                  (deleteAmendment)="deleteAmendments($event)"
                ></app-contracts-amendments>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
