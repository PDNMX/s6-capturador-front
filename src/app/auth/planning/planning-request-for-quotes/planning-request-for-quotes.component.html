<div class="content">
  <div class="container">
    <div class="row">
      <div class="col">
        <h3>Solicitudes de Cotizaciones</h3>
        <hr />
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Titulo</th>
                <th scope="col">Descripción</th>
                <th scope="col">Opciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of requestForQuotesArray; index as i">
                <td scope="row">
                  {{ item.id || 1 + 1 }}
                </td>
                <td>
                  {{ item.title }}
                </td>
                <td>
                  {{ item.description }}
                </td>
                <td>
                  <button
                    type="button"
                    class="btn btn-danger btn-delete"
                    (click)="deleteRequestForQuotes.emit(i)"
                  >
                    Eliminar
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <hr />

    <form [formGroup]="requestForQuotesForm">
      <div class="row">
        <div class="form-floating col mb-5">
          <input
            class="form-control"
            id="title"
            type="text"
            data-sb-validations="required"
            placeholder="Titulo*"
            formControlName="title"
          />
          <label for="title">Titulo*</label>
          <div class="invalid-feedback" data-sb-feedback="title:required">
            Titulo * es requerido.
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-floating col mb-5">
          <textarea
            class="form-control"
            id="description"
            type="text"
            placeholder="Descripción*"
            style="height: 100px"
            formControlName="description"
          ></textarea>
          <label for="description">Descripción*</label>
          <div class="invalid-feedback" data-sb-feedback="description:required">
            Descripción * es requerido.
          </div>
        </div>
      </div>

      <fieldset class="border p-3 mb-3" formGroupName="period">
        <legend class="w-auto px-1">Periodo para recibir cotizaciones</legend>

        <div class="row">
          <div class="form-floating col-6 mb-5">
            <input
              class="form-control"
              id="startDate"
              type="date"
              data-sb-validations="required"
              formControlName="startDate"
            />
            <label for="startDate">Fecha de inicio*</label>
            <div class="invalid-feedback" data-sb-feedback="title:required">
              Fecha de inicio * es requerido.
            </div>
          </div>
          <div class="form-floating col-6 mb-5">
            <input
              class="form-control"
              id="endDate"
              type="date"
              data-sb-validations="required"
              formControlName="endDate"
            />
            <label for="endDate">Fecha de término*</label>
            <div class="invalid-feedback" data-sb-feedback="title:required">
              Fecha de término * es requerido.
            </div>
          </div>
        </div>

        <div class="row">
          <div class="form-floating col-6 mb-5">
            <input
              class="form-control"
              id="maxExtentDate"
              type="date"
              data-sb-validations="required"
              formControlName="maxExtentDate"
            />
            <label for="maxExtentDate">Extension máxima*</label>
            <div class="invalid-feedback" data-sb-feedback="title:required">
              Extension máxima * es requerido.
            </div>
          </div>
          <div class="form-floating col-6 mb-5">
            <input
              class="form-control"
              id="durationInDays"
              type="number"
              data-sb-validations="required"
              placeholder="Duración (días)*"
              formControlName="durationInDays"
            />
            <label for="durationInDays">Duración (dias)*</label>
            <div class="invalid-feedback" data-sb-feedback="title:required">
              Duración * es requerido.
            </div>
          </div>
        </div>
      </fieldset>

      <fieldset class="border p-3 mb-3" [formGroup]="selectForm">
        <legend class="w-auto px-1">Proveedores invitados</legend>
        <div class="row">
          <div class="form-floating col-10 mb-5">
            <select class="form-select" formControlName="invitedSuppliers">
              <option
                *ngIf="invitedSuppliers.length === 0"
                [disabled]="invitedSuppliers.length === 0"
              >
                No hay registros de Actores para este proceso de contratación.
              </option>
              <option *ngFor="let c of invitedSuppliers" [ngValue]="c">
                {{ c?.name }}
              </option>
            </select>
          </div>
          <div class="col-2">
            <button
              type="button"
              class="btn btn-danger btn-add"
              (click)="addInvitedSuppliers()"
            >
              Agregar
            </button>
          </div>
        </div>
        <div class="row">
          <div class="table-responsive">
            <table class="table table-hover table-striped mb-10">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Opciones</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  class=""
                  *ngFor="
                    let assists of requestForQuotesForm.value.invitedSuppliers;
                    index as i
                  "
                >
                  <td scope="row">{{ assists.id }}</td>
                  <td>{{ assists.name }}</td>
                  <td>
                    <button
                      type="button"
                      class="btn btn-danger btn-delete"
                      (click)="deleteInvitedSuppliers(i)"
                    >
                      Eliminar
                    </button>
                  </td>
                </tr>
                <tr
                  *ngIf="
                    requestForQuotesForm.value.invitedSuppliers.length === 0
                  "
                >
                  <th scope="row" colspan="3" class="text-center">
                    Sin registros.
                  </th>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </fieldset>

      <div class="row">
        <div class="col">
          <button
            type="button"
            class="btn btn-danger btn-add"
            (click)="addNewRequestForQuotes()"
          >
            Agregar solicitud
          </button>
        </div>
      </div>
      <!-- fin form -->
    </form>

    <hr />
    <!-- <fieldset class="border p-3 mb-3">
      <app-planning-request-for-quotes-items
        [itemsArray]="requestForQuotesForm.value.items"
        (addItem)="addItem($event)"
        (deleteItem)="deleteItem($event)"
      ></app-planning-request-for-quotes-items>
    </fieldset> -->

    <fieldset class="border p-3 mb-3">
      <app-planning-request-for-quotes-quotes
        [quotesArray]="requestForQuotesForm.value.quotes"
        (addQuotes)="addQuotes($event)"
        (deleteQuotes)="deleteQuotes($event)"
      ></app-planning-request-for-quotes-quotes>
    </fieldset>

    <!-- fin -->
  </div>
</div>
